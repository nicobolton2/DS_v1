#script que filta dator por linea, la idea es que del universo de datos que tenemos 
#solo nos quedemos con los de las comunas que nos interesan
'''
funciona
{ "type": "Feature", "properties": { "FID": 136205, "REGION": "13", "NOM_REGION": "REGIÃ“N METROPOLITANA DE SANTIAGO", "PROVINCIA": "132", "NOM_PROVIN": "CORDILLERA", "COMUNA": "13201", "NOM_COMUNA": "PUENTE ALTO", "DISTRITO": 9, "LOCALIDAD": 4, "ENTIDAD_MA": 16, "CATEGORIA": 1, "NOM_CATEGO": "CD", "MANZENT_I": "13201091004016", "TOTAL_PERS": 46, "TOTAL_VIVI": 16, "NHOMBRES": 26, "NMUJERES": 20, "Shape__Area": 4519.03515625, "Shape__Length": 281.43933145317197 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -70.554407149370405, -33.577439869084202 ], [ -70.554418920596703, -33.577440556166202 ], [ -70.554432769256806, -33.577440431160397 ], [ -70.554444150177304, -33.577437247560397 ], [ -70.554454545440905, -33.577432754547502 ], [ -70.554460814614899, -33.577429027756899 ], [ -70.5544666260339, -33.577423576965998 ], [ -70.554474620107598, -33.577413881375001 ], [ -70.5546253329927, -33.577134171534297 ], [ -70.554245433280101, -33.576975559903701 ], [ -70.554241115634994, -33.576973756763003 ], [ -70.554237916746402, -33.576972529188403 ], [ -70.554235502965994, -33.576971602886701 ], [ -70.553865769189898, -33.576829733035296 ], [ -70.553677746131001, -33.577151634569802 ], [ -70.553906812449398, -33.5772400487187 ], [ -70.554360520421696, -33.577422537349698 ], [ -70.554404074588305, -33.577439800735696 ], [ -70.554407149370405, -33.577439869084202 ] ] ] } },


{"type":"FeatureCollection","totalFeatures":395480,"features":
    [{"type":"Feature","id":"maestro_de_calles_2018.294991","geometry":{"type":"MultiLineString","coordinates":[[[-70.579489106,-33.5749219781302],[-70.5785175939999,-33.5747630301302]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293991,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VIZCACHAS","INI_IZQ":298,"INI_DER":299,"TER_IZQ":338,"TER_DER":339,"CODIGO":"V1320114722","Shape__Len":110.2136705747}},
     {"type":"Feature","id":"maestro_de_calles_2018.294992","geometry":{"type":"MultiLineString","coordinates":[[[-70.568858682,-33.5715451011302],[-70.568200823,-33.5714960891302]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293992,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VOLCAN ALURADO","INI_IZQ":1260,"INI_DER":1257,"TER_IZQ":1294,"TER_DER":1295,"CODIGO":"V1320114723","Shape__Len":73.5247106993804}},
     {"type":"Feature","id":"maestro_de_calles_2018.294993","geometry":{"type":"MultiLineString","coordinates":[[[-70.594007038,-33.6216766361296],[-70.5940349909999,-33.6215448931296],[-70.594069298,-33.6213933171296]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293993,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VOLCAN ANTILLANCA","INI_IZQ":513,"INI_DER":508,"TER_IZQ":485,"TER_DER":484,"CODIGO":"V1320114724","Shape__Len":38.5044308761784}},
     {"type":"Feature","id":"maestro_de_calles_2018.294994","geometry":{"type":"MultiLineString","coordinates":[[[-70.594069298,-33.6213933171296],[-70.594086577,-33.6213169881296],[-70.5941372899999,-33.6210883771296],[-70.594164285,-33.6209977371296],[-70.594164513,-33.6209969711296]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293994,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VOLCAN ANTILLANCA","INI_IZQ":477,"INI_DER":478,"TER_IZQ":467,"TER_DER":458,"CODIGO":"V1320114724","Shape__Len":54.051387248673}},
     {"type":"Feature","id":"maestro_de_calles_2018.294995","geometry":{"type":"MultiLineString","coordinates":[[[-70.593944173,-33.6219484341296],[-70.593986032,-33.6217756361296],[-70.594007038,-33.6216766361296]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293995,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VOLCAN ANTILLANCA","INI_IZQ":543,"INI_DER":540,"TER_IZQ":521,"TER_DER":514,"CODIGO":"V1320114724","Shape__Len":37.0051346119021}},
     {"type":"Feature","id":"maestro_de_calles_2018.294996","geometry":{"type":"MultiLineString","coordinates":[[[-70.593879955,-33.6222135341296],[-70.593896563,-33.6221449731296],[-70.593944173,-33.6219484341296]]]},"geometry_name":"the_geom","properties":{"OBJECTID":293996,"CUT_COM":"13201","CONARA":"16301","REGION":"METROPOLITANA DE SANTIAGO","COMUNA":"PUENTE ALTO","NOMBRE_AUX":"","NOMBRE_MAE":"PASAJE VOLCAN ANTILLANCA","INI_IZQ":569,"INI_DER":550,"TER_IZQ":551,"TER_DER":546,"CODIGO":"V1320114724","Shape__Len":36.1533694345089}},


FID,the_geom,OBJECTID,CUT_COM,CONARA,REGION,COMUNA,NOMBRE_AUX,NOMBRE_MAE,INI_IZQ,INI_DER,TER_IZQ,TER_DER,CODIGO,Shape__Len
maestro_de_calles_2018.294991,"MULTILINESTRING ((-70.579489106 -33.5749219781302, -70.5785175939999 -33.5747630301302))",293991,13201,16301,METROPOLITANA DE SANTIAGO,PUENTE ALTO,,PASAJE VIZCACHAS,298,299,338,339,V1320114722,110.21367057
maestro_de_calles_2018.294992,"MULTILINESTRING ((-70.568858682 -33.5715451011302, -70.568200823 -33.5714960891302))",293992,13201,16301,METROPOLITANA DE SANTIAGO,PUENTE ALTO,,PASAJE VOLCAN ALURADO,1260,1257,1294,1295,V1320114723,73.5247107
maestro_de_calles_2018.294993,"MULTILINESTRING ((-70.594007038 -33.6216766361296, -70.5940349909999 -33.6215448931296, -70.594069298 -33.6213933171296))",293993,13201,16301,METROPOLITANA DE SANTIAGO,PUENTE ALTO,,PASAJE VOLCAN ANTILLANCA,513,508,485,484,V1320114724,38.50443088
maestro_de_calles_2018.294994,"MULTILINESTRING ((-70.594069298 -33.6213933171296, -70.594086577 -33.6213169881296, -70.5941372899999 -33.6210883771296, -70.594164285 -33.6209977371296, -70.594164513 -33.6209969711296))",293994,13201,16301,METROPOLITANA DE SANTIAGO,PUENTE ALTO,,PASAJE VOLCAN ANTILLANCA,477,478,467,458,V1320114724,54.05138725
maestro_de_calles_2018.294995,"MULTILINESTRING ((-70.593944173 -33.6219484341296, -70.593986032 -33.6217756361296, -70.594007038 -33.6216766361296))",293995,13201,16301,METROPOLITANA DE SANTIAGO,PUENTE ALTO,,PASAJE VOLCAN ANTILLANCA,543,540,521,514,V1320114724,37.00513461
'''



s = ""
with open("../layers/todos_los_datos.geojson") as archivo:
    for linea in archivo:
        if linea.find('PUENTE ALTO') != -1 or linea.find('LA FLORIDA') != -1 or linea.find('LA PINTANA') != -1:
            s = s + linea
f = open ('../layers/datos_filtrados.js','w')
f.write(s)
f.close()
